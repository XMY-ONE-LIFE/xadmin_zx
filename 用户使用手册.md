# XAdmin 测试管理平台 - 用户使用手册

**版本：** 1.0  
**文档日期：** 2025年11月  
**适用范围：** 系统管理员、测试工程师、开发人员

---

## 目录

1. [系统简介](#1-系统简介)
2. [快速开始](#2-快速开始)
3. [用户登录与认证](#3-用户登录与认证)
4. [系统主界面](#4-系统主界面)
5. [TPGen测试计划生成器](#5-tpgen测试计划生成器)
6. [我的测试计划](#6-我的测试计划)
7. [系统管理](#7-系统管理)
8. [常见问题](#8-常见问题)
9. [附录](#9-附录)

---

## 1. 系统简介

### 1.1 系统概述

XAdmin 测试管理平台是一个基于现代化技术栈构建的企业级测试管理系统，提供完整的测试计划生成、设备管理、权限控制等功能。

### 1.2 主要功能

- **测试计划生成器（TPGen）**
  - 在线自定义测试计划
  - 上传和验证YAML配置文件
  - 自动化测试配置生成
  
- **设备管理**
  - SUT设备信息管理
  - GPU/CPU配置管理
  - 设备兼容性分析

- **用户与权限管理**
  - 基于RBAC的权限控制
  - 用户角色管理
  - 部门组织架构管理

- **系统配置**
  - 操作系统配置管理
  - 内核版本管理
  - 测试用例库管理

### 1.3 技术架构

**后端技术栈：**
- Python 3.13+
- Django 5.2.7
- Django Ninja (RESTful API)
- PostgreSQL 数据库
- Redis 缓存

**前端技术栈：**
- Vue 3
- TypeScript
- Arco Design UI框架
- Vite 构建工具

### 1.4 系统要求

**浏览器要求：**
- Chrome 90+ (推荐)
- Firefox 88+
- Edge 90+
- Safari 14+

**网络要求：**
- 稳定的网络连接
- 建议使用HTTPS访问

---

## 2. 快速开始

### 2.1 访问系统

**系统地址：** `http://your-domain:8000`

【预留图片位置：系统登录页面截图】

### 2.2 首次登录流程

1. 打开浏览器，输入系统地址
2. 在登录页面输入用户名和密码
3. 点击"登录"按钮
4. 首次登录建议修改初始密码

### 2.3 界面语言

系统目前支持中文界面，未来将支持多语言切换。

---

## 3. 用户登录与认证

### 3.1 登录系统

#### 3.1.1 用户名密码登录

**步骤：**

1. 在登录页面输入用户名
2. 输入密码（密码输入框自动隐藏）
3. 点击"登录"按钮

【预留图片位置：登录界面标注图】

**字段说明：**

| 字段 | 说明 | 必填 |
|------|------|------|
| 用户名 | 系统分配的用户名 | 是 |
| 密码 | 用户密码（Base64编码传输） | 是 |

#### 3.1.2 记住密码

勾选"记住我"选项，下次登录自动填充用户名。

⚠️ **安全提示：** 在公共电脑上请勿勾选此选项。

### 3.2 忘记密码

如忘记密码，请联系系统管理员重置密码。

### 3.3 JWT认证机制

系统采用JWT (JSON Web Token)进行用户认证：
- Token有效期：30天
- 自动续期机制
- 安全的Bearer认证方式

### 3.4 退出登录

点击右上角用户头像 → 选择"退出登录"

---

## 4. 系统主界面

### 4.1 界面布局

系统采用经典的后台管理布局：

【预留图片位置：主界面全屏截图并标注各区域】

**主要区域：**

1. **顶部导航栏**
   - 系统Logo
   - 面包屑导航
   - 用户信息
   - 退出按钮

2. **左侧菜单栏**
   - 功能菜单树
   - 可折叠/展开
   - 图标+文字显示

3. **主内容区**
   - 功能页面展示区域
   - 动态路由切换
   - 平滑过渡动画

4. **底部状态栏**
   - 版权信息
   - 在线用户数

### 4.2 菜单导航

#### 4.2.1 主要菜单模块

| 菜单 | 功能说明 | 权限要求 |
|------|---------|---------|
| 仪表板 | 系统概览和统计 | 所有用户 |
| TPGen | 测试计划生成器 | 测试工程师 |
| 我的测试计划 | 查看和管理测试计划 | 测试工程师 |
| 系统管理 | 用户、角色、权限管理 | 系统管理员 |
| 设备管理 | SUT设备信息管理 | 管理员 |

#### 4.2.2 菜单操作

- **展开/折叠子菜单：** 点击父级菜单
- **快速导航：** 点击菜单项直接跳转
- **收起侧边栏：** 点击左上角折叠按钮

### 4.3 面包屑导航

面包屑显示当前页面路径，点击可快速返回上级页面。

示例：`首页 / TPGen / 在线测试计划`

---

## 5. TPGen测试计划生成器

### 5.1 功能概述

TPGen是系统的核心模块，提供两种测试计划生成方式：
1. **上传测试计划** - 上传已有的YAML配置文件
2. **自定义测试计划** - 在线可视化配置生成

### 5.2 上传测试计划

#### 5.2.1 功能入口

导航路径：`TPGen → 在线测试计划 → 上传测试计划`

【预留图片位置：上传测试计划页面】

#### 5.2.2 上传操作步骤

**方式一：拖拽上传**

1. 准备好YAML格式的测试计划文件
2. 将文件拖拽到上传区域
3. 系统自动开始解析
4. 查看解析结果

**方式二：点击上传**

1. 点击"选择文件"按钮
2. 在文件选择对话框中选择YAML文件
3. 点击"打开"确认
4. 等待系统解析

#### 5.2.3 文件要求

| 项目 | 要求 |
|------|------|
| 文件格式 | `.yaml` 或 `.yml` |
| 文件大小 | 不超过10MB |
| 编码格式 | UTF-8 |
| YAML版本 | 1.2+ |

#### 5.2.4 验证规则

系统会自动进行以下验证：

**E001 - 必需字段验证**
- 检查`hardware.cpu`字段
- 检查`hardware.gpu`字段
- 缺失时显示错误提示

**E002 - 空值验证**
- 所有字段不能为空值
- 数组不能为空数组
- 对象不能为空对象

**E101 - 类型验证**
- 字符串类型字段
- 数值类型字段
- 布尔类型字段

**E102 - 值范围验证**
- CPU型号白名单验证
- 操作系统白名单验证

#### 5.2.5 分析报告

【预留图片位置：分析报告示例】

上传成功后显示：
- ✅ 验证通过项目
- ❌ 验证失败项目
- ⚠️ 警告信息
- 错误代码和行号定位

### 5.3 自定义测试计划

#### 5.3.1 功能入口

导航路径：`TPGen → 在线测试计划 → 自定义测试计划`

【预留图片位置：自定义测试计划主界面】

#### 5.3.2 配置流程

整个配置过程分为5个步骤：

```
硬件平台配置 → 操作系统环境 → 内核和驱动配置 → 测试用例管理 → 生成测试计划
```

**进度跟踪**
- 顶部进度条实时显示完成度
- 已配置项以绿色显示
- 未配置项以灰色显示

### 5.4 硬件平台配置

#### 5.4.1 GPU选择

【预留图片位置：GPU选择下拉框】

**操作步骤：**

1. 点击"AMD GPU Product Line"下拉框
2. 从列表中选择GPU型号
3. 系统自动从数据库加载可用选项

**支持的GPU选项：**
- 自动从`sut_devices`表加载
- 显示ASIC名称（如：Navi 31 GFX1100）
- 动态更新机器列表

#### 5.4.2 测试机器选择

【预留图片位置：机器列表卡片】

**功能说明：**

- **自动过滤** - 根据选择的GPU自动过滤兼容机器
- **多选支持** - 可选择多台机器
- **实时预览** - 显示机器详细信息

**机器信息包含：**
- 机器名称
- 主板型号
- GPU配置
- CPU配置
- 可用状态

**选择操作：**
1. 浏览机器列表
2. 点击机器卡片进行选择/取消选择
3. 选中的机器高亮显示
4. 支持多选

### 5.5 操作系统环境配置

#### 5.5.1 配置模式

【预留图片位置：配置模式选择】

系统提供两种配置模式：

**统一配置模式**
- 所有机器使用相同的OS配置
- 简化配置流程
- 适用于标准化测试环境

**独立配置模式**
- 每台机器单独配置
- 灵活性更高
- 适用于复杂测试场景

#### 5.5.2 统一配置

【预留表格位置：配置项说明】

| 配置项 | 说明 | 选项示例 |
|--------|------|---------|
| 操作系统 | Linux发行版 | Ubuntu 22.04, RHEL 9 |
| 部署方式 | 部署模式 | Bare Metal, VM, Container |

#### 5.5.3 独立配置

【预留图片位置：独立配置表格】

为每台选中的机器单独配置：
1. 机器列表显示
2. 为每台机器选择OS
3. 为每台机器选择部署方式
4. 支持批量操作

### 5.6 内核和驱动配置

#### 5.6.1 配置选项

【预留图片位置：内核配置界面】

**内核类型：**
- DKMS
- Mainline
- Custom Build
- LTS

**内核版本：**
- 6.1
- 6.0
- 5.15
- 5.10

#### 5.6.2 配置模式

同样支持统一配置和独立配置两种模式。

### 5.7 测试用例管理

#### 5.7.1 测试用例分组

【预留图片位置：测试用例分组界面】

系统预定义四大测试组：

**Benchmark 基准测试**
- FFmpeg 视频编解码测试
- CLPeak GPU性能测试
- 其他基准测试工具

**Functional 功能测试**
- 计算功能测试
- 媒体功能测试
- API兼容性测试

**Performance 性能测试**
- 游戏性能测试
- 渲染性能测试
- VR性能测试

**Stress 压力测试**
- 内存压力测试
- GPU压力测试
- 热管理测试

#### 5.7.2 测试用例选择

【预留图片位置：测试用例选择界面】

**操作方式：**

1. **浏览测试组** - 展开/折叠测试组
2. **搜索测试用例** - 输入关键词快速查找
3. **选择测试用例** - 勾选需要的测试用例
4. **拖拽排序** - 调整测试用例执行顺序
5. **实时预览** - 右侧显示已选测试用例

#### 5.7.3 自定义测试组

【预留图片位置：自定义测试组对话框】

**创建步骤：**

1. 点击"创建自定义组"按钮
2. 输入组名
3. 选择测试类型
4. 从测试用例库中选择测试用例
5. 保存自定义组

### 5.8 生成测试计划

#### 5.8.1 生成操作

【预留图片位置：生成按钮和进度】

**步骤：**

1. 完成所有配置
2. 点击"Generate Test Plan"按钮
3. 系统自动生成YAML配置
4. 进度条显示100%
5. 显示YAML预览

#### 5.8.2 YAML预览

【预留图片位置：YAML预览界面】

**功能特性：**

- **语法高亮** - 彩色代码显示
- **行号显示** - 方便定位和引用
- **错误标注** - 自动高亮错误行
- **代码折叠** - 支持展开/折叠代码块

#### 5.8.3 兼容性验证

生成后自动进行兼容性验证：

【预留图片位置：验证结果提示】

**验证项目：**
- ✅ E001: 必需字段检查
- ✅ E002: 空值检查
- ✅ E101: 类型验证
- ✅ E102: 值范围验证

**验证失败处理：**
- 在预览区高亮错误行
- 右上角显示错误通知
- 阻止复制和下载操作

### 5.9 导出测试计划

#### 5.9.1 复制到剪贴板

【预留图片位置：复制按钮】

**操作：**

1. 点击"Copy to Clipboard"按钮
2. 系统执行兼容性验证
3. 验证通过后复制到剪贴板
4. 显示成功提示

**浏览器要求：**
- 需要HTTPS安全上下文
- 支持Clipboard API

#### 5.9.2 下载YAML文件

【预留图片位置：下载按钮】

**操作：**

1. 点击"Download YAML"按钮
2. 系统执行兼容性验证
3. 验证通过后自动下载
4. 文件名格式：`test-plan_YYYY-MM-DD-HH-mm-ss.yaml`

**下载文件信息：**
- 文件格式：YAML
- 编码：UTF-8
- 自动添加时间戳

### 5.10 重置表单

点击"Reset Form"按钮可清空所有配置，重新开始。

⚠️ **注意：** 重置操作不可恢复，请谨慎操作。

---

## 6. 我的测试计划

### 6.1 功能概述

管理和查看自己保存的测试计划。

### 6.2 测试计划列表

【预留图片位置：测试计划列表页面】

**列表信息：**

| 列 | 说明 |
|----|------|
| 计划名称 | 测试计划的名称 |
| 分类 | Benchmark/Functional/Performance/Stress |
| 创建时间 | 计划创建时间 |
| 状态 | 草稿/已发布/已归档 |
| 操作 | 查看/编辑/删除 |

### 6.3 查看测试计划

【预留图片位置：测试计划详情页】

点击"查看"按钮显示测试计划详情：
- 配置信息
- YAML内容
- 执行历史
- 测试结果

### 6.4 编辑测试计划

点击"编辑"按钮可修改测试计划配置。

### 6.5 删除测试计划

点击"删除"按钮，确认后删除测试计划。

⚠️ **注意：** 删除操作不可恢复。

---

## 7. 系统管理

### 7.1 用户管理

【预留图片位置：用户管理界面】

#### 7.1.1 用户列表

显示所有系统用户信息：
- 用户名
- 真实姓名
- 邮箱
- 角色
- 部门
- 状态

#### 7.1.2 新增用户

**操作步骤：**

1. 点击"新增用户"按钮
2. 填写用户信息
3. 分配角色和权限
4. 保存

**必填字段：**
- 用户名（唯一）
- 密码
- 确认密码
- 真实姓名
- 角色

#### 7.1.3 编辑用户

1. 点击用户操作列的"编辑"
2. 修改用户信息
3. 保存更改

#### 7.1.4 重置密码

系统管理员可为用户重置密码。

#### 7.1.5 禁用/启用用户

可暂时禁用用户账户，不删除用户数据。

### 7.2 角色管理

【预留图片位置：角色管理界面】

#### 7.2.1 系统预设角色

| 角色 | 权限范围 | 说明 |
|------|---------|------|
| 超级管理员 | 全部权限 | 系统最高权限 |
| 系统管理员 | 系统管理权限 | 负责系统配置 |
| 测试工程师 | 测试相关权限 | 使用TPGen等功能 |
| 只读用户 | 查看权限 | 只能查看不能修改 |

#### 7.2.2 创建自定义角色

**步骤：**

1. 点击"新增角色"
2. 输入角色名称和描述
3. 勾选功能权限
4. 设置数据权限范围
5. 保存

#### 7.2.3 权限配置

【预留图片位置：权限树形结构】

采用树形结构配置权限：
- 模块级权限
- 功能级权限
- 操作级权限（增删改查）

### 7.3 菜单管理

【预留图片位置：菜单管理界面】

#### 7.3.1 菜单树

显示系统所有菜单的树形结构。

#### 7.3.2 新增菜单

**菜单类型：**
- 目录菜单
- 菜单项
- 按钮权限

**配置项：**
- 菜单名称
- 图标
- 路由地址
- 组件路径
- 排序
- 是否显示
- 是否缓存

### 7.4 部门管理

【预留图片位置：部门管理界面】

#### 7.4.1 部门树

显示组织架构的树形结构。

#### 7.4.2 部门操作

- 新增部门
- 编辑部门
- 删除部门
- 移动部门位置

### 7.5 系统设置

【预留图片位置：系统设置界面】

#### 7.5.1 基础设置

- 系统名称
- Logo上传
- 版权信息
- 备案号

#### 7.5.2 安全设置

- 密码策略
- 登录失败锁定
- 会话超时时间
- IP白名单

#### 7.5.3 邮件设置

- SMTP服务器
- 发件人信息
- 邮件模板

---

## 8. 常见问题

### 8.1 登录问题

**Q: 忘记密码怎么办？**
A: 联系系统管理员通过后台重置密码。

**Q: 提示"账号已被锁定"？**
A: 可能是多次登录失败，请等待30分钟后重试，或联系管理员解锁。

**Q: Token过期怎么办？**
A: 系统会自动刷新Token，如果频繁过期请检查系统时间是否正确。

### 8.2 TPGen使用问题

**Q: 上传YAML文件失败？**
A: 检查以下几点：
- 文件格式是否为.yaml或.yml
- 文件大小是否超过限制
- YAML语法是否正确
- 必需字段是否完整

**Q: 为什么没有可用的测试机器？**
A: 请检查：
- 是否选择了GPU
- 数据库中是否有匹配的设备记录
- 设备状态是否为"Available"

**Q: 生成的YAML文件中machines为空？**
A: 这是正常的E002验证错误，请确保至少选择了一台测试机器。

**Q: 复制到剪贴板失败？**
A: 可能原因：
- 浏览器不支持Clipboard API
- 未使用HTTPS协议
- 浏览器禁用了剪贴板权限

### 8.3 权限问题

**Q: 提示"无权限访问"？**
A: 联系系统管理员分配相应的角色和权限。

**Q: 看不到某些菜单？**
A: 可能是该菜单需要特定权限，请联系管理员。

### 8.4 性能问题

**Q: 页面加载缓慢？**
A: 建议：
- 清除浏览器缓存
- 检查网络连接
- 使用Chrome浏览器
- 关闭不必要的浏览器扩展

**Q: 大批量数据操作卡顿？**
A: 建议分批处理，或联系管理员优化数据库。

---

## 9. 附录

### 9.1 快捷键列表

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + S` | 保存（部分页面） |
| `Esc` | 关闭弹窗 |
| `F5` | 刷新页面 |
| `Ctrl + F` | 搜索（浏览器功能） |

### 9.2 API接口文档

访问：`http://your-domain:8000/api/docs`

提供完整的RESTful API文档。

### 9.3 错误码对照表

| 错误码 | 说明 | 解决方案 |
|--------|------|---------|
| E001 | 缺少必需字段 | 检查YAML配置，补充缺失字段 |
| E002 | 字段值为空 | 确保所有字段有有效值 |
| E101 | 类型错误 | 检查字段类型是否正确 |
| E102 | 值超出范围 | 使用白名单中的合法值 |
| E999 | 未知错误 | 联系技术支持 |

### 9.4 YAML配置示例

```yaml
metadata:
  generated: "2025-11-12T14:30:00Z"
  version: "1.0"

hardware:
  cpu: "Ryzen Threadripper"
  gpu: "Navi 31 GFX1100"
  machines:
    - id: 1
      name: "Test Machine 1"
      specs:
        motherboard: "ASUS X670E"
        gpu: "Navi 31 GFX1100"
        cpu: "Ryzen Threadripper"

environment:
  os:
    method: "same"
    os: "Ubuntu 22.04"
    deployment: "Bare Metal"
  kernel:
    method: "same"
    type: "DKMS"
    version: "6.1"

firmware:
  gpu_version: "2023.07"
  comparison: false

test_suites:
  - id: 101
    name: "H.264 Encoding"
    description: "Benchmark H.264 video encoding performance"
    type: "Benchmark"
    subgroup: "ffmpeg"
    order: 1
```

### 9.5 数据库表结构

**核心表：**

- `sys_user` - 用户表
- `sys_role` - 角色表
- `sys_menu` - 菜单表
- `sys_dept` - 部门表
- `sut_devices` - SUT设备表
- `test_plans` - 测试计划表
- `test_cases` - 测试用例表
- `os_configs` - 操作系统配置表

### 9.6 系统日志

**日志位置：** `/logs/xadmin.log`

**日志级别：**
- DEBUG - 调试信息
- INFO - 一般信息
- WARNING - 警告信息
- ERROR - 错误信息
- CRITICAL - 严重错误

### 9.7 技术支持

**联系方式：**
- 技术支持邮箱：support@company.com
- 问题反馈：提交Issue到项目仓库
- 在线文档：http://docs.company.com

### 9.8 更新日志

**版本 1.0.0 (2025-11-12)**
- ✅ 初始版本发布
- ✅ TPGen测试计划生成器
- ✅ 用户权限管理系统
- ✅ YAML验证功能

### 9.9 许可协议

本系统遵循公司内部使用许可协议。

### 9.10 术语表

| 术语 | 全称 | 说明 |
|------|------|------|
| TPGen | Test Plan Generator | 测试计划生成器 |
| SUT | System Under Test | 被测系统 |
| RBAC | Role-Based Access Control | 基于角色的访问控制 |
| JWT | JSON Web Token | JSON Web令牌 |
| YAML | YAML Ain't Markup Language | 配置文件格式 |
| API | Application Programming Interface | 应用程序接口 |
| GPU | Graphics Processing Unit | 图形处理器 |
| CPU | Central Processing Unit | 中央处理器 |
| OS | Operating System | 操作系统 |

---

## 文档结束

**感谢使用 XAdmin 测试管理平台！**

如有任何问题或建议，请联系技术支持团队。

---

**文档版本历史：**

| 版本 | 日期 | 作者 | 修改说明 |
|------|------|------|---------|
| 1.0 | 2025-11-12 | System | 初始版本 |

---

**©️ 2025 公司名称 版权所有**

